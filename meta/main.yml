---
galaxy_info:
  author: Joerg Fiedler
  description: Provides a jailed Joomla server.
  license: BSD
  min_ansible_version: 2.0
  platforms:
    - name: FreeBSD
      versions:
        - 10.2
        - 10.3
        - 11.0
  galaxy_tags:
    - FreeBSD
    - jails
    - iocage
    - cloud
    - ec2
    - php-fpm
    - Joomla
    - nginx
allow_duplicates: yes
dependencies:
  - { role: JoergFiedler.freebsd-jailed-nginx,
      nginx_servers: [ {
        aliases: '{{ joomla_server_aliases }}',
        default: '{{ joomla_server_default }}',
        force_https: '{{ joomla_server_force_https }}',
        force_www: '{{ joomla_server_force_www }}',
        https: {
          enabled: '{{ joomla_server_force_https }}',
          letsencrypt_enabled: '{{ joomla_server_force_https }}'
        },
        name: '{{ joomla_server_name }}',
        php_fpm_enabled: true,
        sftp_enabled: true,
        sftp: {
          authorized_keys: '{{ joomla_sftp_authorized_keys }}',
          home: '{{ joomla_server_webroot_home }}',
          port: '{{ joomla_sftp_port }}',
          user: '{{ joomla_sftp_user }}',
          uuid: '{{ joomla_sftp_uid }}'
        }
      }]}
